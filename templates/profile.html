{% extends 'base.html' %}

{% block title %}Профиль {{ user_obj.username }}{% endblock %}

{% block content %}
  <style>
    .profile-container {
      max-width: 600px;
      margin: 50px auto;
      padding: 30px;
      background-color: #f8f9fa;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      text-align: center;
      font-family: "Segoe UI", sans-serif;
    }

    .profile-container h1 {
      color: #333;
      margin-bottom: 20px;
    }

    .profile-container p {
      color: #555;
      font-size: 16px;
      margin: 8px 0;
    }
    a{
      color:black;
    }
  </style>

  <div class="profile-container">
    <h1>Профиль пользователя {{ user_obj.username }}</h1>
    <p>Email: {{ user_obj.email }}</p>
    <p>Дата регистрации: {{ user_obj.date_joined|date:"d.m.Y" }}</p>
    <p>Последний вход: {{ user_obj.last_login|date:"d.m.Y H:i" }}</p>
    <a href="{% url 'add_property' %}">Добавить новое объявление</a>
  </div>

 <div class="properties">
  <h2>Мои объявления</h2>
  {% if user_properties %}
    <ul>
      {% for prop in user_properties %}
        <li>
          <strong>{{ prop.title }}</strong> — {{ prop.price }} золота<br>
          {% if prop.image %}
            <img src="{{ prop.image.url }}" alt="{{ prop.title }}" width="200">
          {% endif %}
          {{ prop.description }}
          {% if request.user == prop.owner %}
             <form action="{% url 'delete_property' prop.id %}" method="GET" style="display:inline;">
             <button type="submit" style="color:red; background:none; border:none; cursor:pointer;">Удалить</button>
             </form>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>Вы пока не добавили ни одного объявления.</p>
  {% endif %}
</div>

  </div>
  
{% endblock %}